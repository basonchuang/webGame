<html>
    <head>
        <title>Instructor</title>
        <meta charset="utf-8">
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
        <script src="../function/cookie.js"></script>
        <link rel="stylesheet" href="../css/chat.css">
        <link href="../css/moblab.css" rel="stylesheet" type="text/css">
        <link href="../css/server_common.css" rel="stylesheet" type="text/css">
        <link href="../css/login.css" rel="stylesheet" type="text/css">
    </head>
    <body id="login" class="inline" style="height: 100%;width: 100%;">
        <div class="login-div">
            <div class="login-title">
                <p>Your Account: <span id="account" class="namelite"></span></p>
            </div>
            <p>Classes<span id="classes" class="classes"></span></p>
            <select id="playList"></select>
        </div>
        <div class="blog">
            <div id="blogArticle">
                <iframe id="blogIframe" src="../css/all.html" class="instructorBlogPage"></iframe>
             </div>
        </div>
    </body>
    
    <script type="text/javascript">
        $(document).ready(function() {
            if(getCookie("loginStatus")=='true'){
                document.getElementById("account").innerHTML = getCookie("account");
                pollPlayList();
            }
            else{
                location.href="../index.html";
            }
        });
        //顯示遊戲列表
        function pollPlayList() {
            Iid = document.getElementById("account").innerHTML;
            
            $.ajax({
                    url: "../function/config.php",
                    type: "POST",
                    data: { action: "pollPlayList", Iid: Iid },
                    success: function(r) {
                        obj = JSON.parse(r);
                        list_rooms = "";
                        var gameType = new Array();
                        for(i=1;i<obj.length;i+=2){
                            gameType.push(obj[i]);
                        }
                        for(i=0;i<obj.length;i+=2) {
                            if(gameType[i]=='g'){
                                list_rooms += "<option value='BeautyContest" + '_' + obj[i] + "'>Game code : BeautyContest" + '_' + obj[i] + "</option>";
                            }else if(gameType[i]=='p'){

                            }
                        }
                        $("#playList").html(list_rooms).selectmenu("refresh", true);
                    },
                });
            //setTimeout(poll, 1000);
        }
    </script>
</html>